<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>Hot Module Reloading Module in Docker | Docker 컨테이너에 Hot Module Reloading Module 적용하기 | Martin</title><meta name="keywords" content="'Devops', 'Docker',  "><meta name="description" content="Docker 컨테이너에 Hot Module Reloading Module 적용하기,Hot Module Reloading Module in Docker"><meta property="og:image" content="/images/docker/docker.png"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="[object Object]"><meta name="designer" content="Martin"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="http://blog.martinwork.co.kr/devops/2018/02/16/setting-docker-volume-with-webpack.html"><link rel="icon" type="image/png" href="/images/favicon/favicon-32x32.png" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="프론트엔드 개발자 Martin의 사적인 블로그"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-109243056-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-109243056-1")</script><link rel="stylesheet" href="/scss/views/page/post.css"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(undefined)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="프론트엔드 개발자 Martin의 사적인 블로그" alt="프론트엔드 개발자 Martin의 사적인 블로그"><img src="/images/bg/logo_white_text.png" alt="프론트엔드 개발자 Martin의 사적인 블로그"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="Home" title="Home">Home</a></li><li class="nav__item"><a href="/archives" alt="Archive" title="Archive">Archive</a></li><li class="nav__item"><a href="/about" alt="About" title="About">About</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="/images/docker/docker.png" alt="Hot Module Reloading Module in Docker"></div><header class="post__info"><h1 class="post__title">Hot Module Reloading Module in Docker</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="https://github.com/martinYounghoonKim">Martin</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2018-02-16</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/devops/">Devops</a></li><li class="mark__item"><a href="/tags/docker/">Docker</a></li></ul></div></div></header><div class="post__content"><h2 id="Docker의-Container-에서-Hot-Module-Reloading-Module-실행하기"><a href="#Docker의-Container-에서-Hot-Module-Reloading-Module-실행하기" class="headerlink" title="Docker의 Container 에서 Hot Module Reloading Module 실행하기"></a>Docker의 Container 에서 Hot Module Reloading Module 실행하기</h2><p>이전에 간단하게 Nodejs의 서버를 띄운 후, Docker의 이미지로 만들어 컨테이너를 실행시키는 간단한 예제를 한적이 있었다. 하지만 사실 그 당시 내가 원했던 것은 로컬 Dev 서버를 이미지로 만든 후, sync를 맞추는 것이었다. 현재 진행 중인 사이드 프로젝트의 개발 환경에 대한 셋팅이 많아 그것을 Docker의 이미지로 만들어 두어, 혹여라도 새로운 프론트/백엔드 개발자가 프로젝트에 합류한다면 쉽고 빠르게 개발 환경을 셋팅을 하게 하기 위해서이다. 물론 Docker를 이용한 배포 자동화 역시 안에 목적에 포함되어 있긴 하지만, 아직 배포 자동화까지는 고려할 단계가 아니라서 배제해두고 생각했다.</p><p>현재 진행 중인 프로젝트에 docker-compose를 이용해서 image를 만든 후, 컨테이너로 띄우는 것 까진 성공을 하였다. 물론 volume을 맞춰주어서 로컬에서 소스를 수정하면 컨테이너 안의 소스 역시 수정이 되긴 했다. 하지만 문제는 개발 소스는 수정이 되어도, hot reloading이 실행되지 않았다. 이번에는 간단하게 vuejs 프로젝트와 express 서버를 연결하여 어플리케이션을 컨테이너로 띄운 후, hot reloading module이 실행될 수 있게 하는 것이 목적이다. 외국의 관련된 자료들이 많아 참고하였으며 포스트 하단에 출처를 기재하였으니 혹여라도 원문을 보고 싶으면 하단의 링크를 참고하면 된다.</p><p>Github 링크는 다음과 같다.</p><ul><li><a href="https://github.com/MartinYounghoonKim/docker-sample-vuejs" target="_blank" rel="noopener">Github repository</a></li></ul><h3 id="Express-서버-구축"><a href="#Express-서버-구축" class="headerlink" title="Express 서버 구축"></a>Express 서버 구축</h3><p>먼저 Express 서버를 cli를 이용하여 구축하면 쉽게 구축이 가능 지금 목적은 express 서버가 아니므로, 그냥 index.html에 route 만 연결해주는 용도로만 사용한다.(혹시나 프로젝트 스케폴딩을 위한 목적이라면 cli를 이용하여 설치하는 것을 추천한다.) 먼저 express와 nodemon을 설치한다.<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install express nodemon --save</span><br></pre></td></tr></table></figure><p></p><p>그 후 여타 필요한 최소한의 모듈만 설치해 준다.<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install ejs-local body-parser --save-dev</span><br></pre></td></tr></table></figure><p></p><p>필요한 모듈이 설치되었다면 프로젝트의 root에 app.js를 파일을 만든 후, 아래와 같이 코드를 작성해준다.<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">4000</span>;</span><br><span class="line"><span class="keyword">const</span> engine = <span class="built_in">require</span>(<span class="string">'ejs-locals'</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.set(<span class="string">'views'</span>, __dirname);</span><br><span class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>);</span><br><span class="line">app.engine(<span class="string">'html'</span>, engine);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</span><br><span class="line">  app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    res.render(<span class="string">'index.html'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = app.listen(port, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Express server has started on port:<span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><p>주목적이 docker를 셋팅하기 위한 기본적인 세팅이기에 cli를 이용하여 서버 환경을 구성하지도 않거니와 따로 router를 물리적으로 분리시키지도 않았다. 위와 같이 설정을 한 후에 서버를 띄워주면 일단 기본적인 express를 이용한 구축 환경을 마무리 되었다.<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ nodemon ./app.js</span><br><span class="line"></span><br><span class="line">[nodemon] <span class="number">1.15</span><span class="number">.0</span></span><br><span class="line">[nodemon] to restart at any time, enter <span class="string">`rs`</span></span><br><span class="line">[nodemon] watching: *.*</span><br></pre></td></tr></table></figure><p></p><p>일단 위와 같이 작성 되었으면 <code>localhost:4000</code>에서 서버가 띄워진 것을 확인할 수 있다.</p><h3 id="VueJS-프로젝트-생성-후-Express와-연결하기"><a href="#VueJS-프로젝트-생성-후-Express와-연결하기" class="headerlink" title="VueJS 프로젝트 생성 후, Express와 연결하기"></a>VueJS 프로젝트 생성 후, Express와 연결하기</h3><p>Vuejs 같은 경우는 CLI를 이용해서 프로젝트를 구성하였다. CLI로 이용해서 깔리는 Vue 프로젝트의 build 관련 옵션을 살펴보면 dist의 static 안에 해당 bundle된 파일이 쌓이는 것을 확인할 수 있다. 그래서 다시 Express의 app.js에서 해당하는 static 파일 들에 대한 옵션을 추가해준다.<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">4000</span>;</span><br><span class="line"><span class="keyword">const</span> engine = <span class="built_in">require</span>(<span class="string">'ejs-locals'</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.set(<span class="string">'views'</span>, __dirname);</span><br><span class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>);</span><br><span class="line">app.engine(<span class="string">'html'</span>, engine);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</span><br><span class="line">  app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    res.render(<span class="string">'index.html'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// express의 static 디렉토리 경로를 추가</span></span><br><span class="line"><span class="keyword">let</span> server = app.use(express.static(<span class="string">'dist'</span>)).listen(port, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Express server has started on port:<span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><p>이렇게 추가를 한 후, 빌드를 한 후 localhost:4000으로 접속하면 아래와 같은 화면이 나오는 것을 확인할 수 있다.</p><p><img src="/images/vue/express-vue01.png" alt="/images/vue/express-vue01.png"></p><p>여기까지 확인이 되었다면 일단 Docker를 세팅하기 위한 준비는 마무리 되었다고 볼 수 있다.</p><h3 id="배포용-이미지-파일-만들기"><a href="#배포용-이미지-파일-만들기" class="headerlink" title="배포용 이미지 파일 만들기"></a>배포용 이미지 파일 만들기</h3><p>위와 같은 파일이 생성되었으면 이제 docker image로 만들기 위한 준비가 필요하다. 일단은 먼저 Dockerfile을 생성한 후 아래의 내용을 붙혀넣는다.<br></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:carbon</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir /usr/src/app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /usr/src/app</span></span><br><span class="line"><span class="keyword">ENV</span> NODE_ENV=local</span><br><span class="line"></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> package.json /usr/src/app/package.json</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install nodemon -g</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">4000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> npm run server</span></span><br></pre></td></tr></table></figure><p></p><p>위의 파일이 완료되었으면 docker-compose.yml 파일을 생성 후 아래의 내용을 붙혀준 후에 이미지를 빌드한다.<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'2'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">    frontend:</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">docker-vue-sample</span></span><br><span class="line"><span class="attr">        working_dir:</span> <span class="string">/usr/src/app</span></span><br><span class="line"><span class="attr">        build:</span></span><br><span class="line"><span class="attr">            context:</span> <span class="string">./</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">"4000:4000"</span></span><br><span class="line"><span class="attr">        restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">"./:/usr/src/app"</span></span><br></pre></td></tr></table></figure><p></p><p>아래와 같이 compose를 이용해 docker 이미지 빌드한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose build</span><br><span class="line"></span><br><span class="line">Building frontend</span><br><span class="line">Step 1/9 : FROM node:carbon</span><br><span class="line"> ---&gt; b87c2ad8344d</span><br><span class="line">Step 2/9 : RUN mkdir /usr/src/app</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; f61f9d1b391b</span><br><span class="line">Step 3/9 : WORKDIR /usr/src/app</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; c25a87610a2c</span><br><span class="line">Step 4/9 : ENV NODE_ENV=<span class="built_in">local</span></span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> e73a68fc78c4</span><br><span class="line"> ---&gt; b08816909513</span><br><span class="line">Step 5/9 : ADD package.json /usr/src/app/package.json</span><br><span class="line"> ---&gt; a8077b7c4c25</span><br><span class="line">Step 6/9 : RUN npm install nodemon -g</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 56e90eef2476</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/nodemon -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/nodemon/bin/nodemon.js</span><br><span class="line"></span><br><span class="line">&gt; nodemon@1.15.0 postinstall /usr/<span class="built_in">local</span>/lib/node_modules/nodemon</span><br><span class="line">&gt; node -e <span class="string">"console.log('\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n &gt; \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n')"</span> || <span class="built_in">exit</span> 0</span><br><span class="line"></span><br><span class="line">Love nodemon? You can now support the project via the open collective:</span><br><span class="line"> &gt; https://opencollective.com/nodemon/donate</span><br><span class="line"></span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/nodemon/node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="keyword">for</span> fsevents@1.1.3: wanted &#123;<span class="string">"os"</span>:<span class="string">"darwin"</span>,<span class="string">"arch"</span>:<span class="string">"any"</span>&#125; (current: &#123;<span class="string">"os"</span>:<span class="string">"linux"</span>,<span class="string">"arch"</span>:<span class="string">"x64"</span>&#125;)</span><br><span class="line"></span><br><span class="line">+ nodemon@1.15.0</span><br><span class="line">added 252 packages <span class="keyword">in</span> 11.338s</span><br><span class="line"> ---&gt; 996861500b0e</span><br><span class="line">Step 7/9 : RUN npm install</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> d2eb13f862c2</span><br><span class="line">npm WARN deprecated ejs@0.8.8: Critical security bugs fixed <span class="keyword">in</span> 2.5.5</span><br><span class="line"></span><br><span class="line">&gt; uglifyjs-webpack-plugin@0.4.6 postinstall /usr/src/app/node_modules/webpack/node_modules/uglifyjs-webpack-plugin</span><br><span class="line">&gt; node lib/post_install.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; nodemon@1.15.0 postinstall /usr/src/app/node_modules/nodemon</span><br><span class="line">&gt; node -e <span class="string">"console.log('\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n &gt; \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n')"</span> || <span class="built_in">exit</span> 0</span><br><span class="line"></span><br><span class="line">Love nodemon? You can now support the project via the open collective:</span><br><span class="line"> &gt; https://opencollective.com/nodemon/donate</span><br><span class="line"></span><br><span class="line">added 1324 packages <span class="keyword">in</span> 29.121s</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">npm WARN ajv-keywords@3.1.0 requires a peer of ajv@^6.0.0 but none is installed. You must install peer dependencies yourself.</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="keyword">for</span> fsevents@1.1.3: wanted &#123;<span class="string">"os"</span>:<span class="string">"darwin"</span>,<span class="string">"arch"</span>:<span class="string">"any"</span>&#125; (current: &#123;<span class="string">"os"</span>:<span class="string">"linux"</span>,<span class="string">"arch"</span>:<span class="string">"x64"</span>&#125;)</span><br><span class="line"></span><br><span class="line"> ---&gt; 6e75dabdf990</span><br><span class="line">Step 8/9 : EXPOSE 4000</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> bc87f0beb893</span><br><span class="line"> ---&gt; f3dba9f3c6e7</span><br><span class="line">Step 9/9 : CMD npm run server</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 115f4f80ba9a</span><br><span class="line"> ---&gt; 63f07e977741</span><br><span class="line">Removing intermediate container e73a68fc78c4</span><br><span class="line">Removing intermediate container 56e90eef2476</span><br><span class="line">Removing intermediate container d2eb13f862c2</span><br><span class="line">Removing intermediate container bc87f0beb893</span><br><span class="line">Removing intermediate container 115f4f80ba9a</span><br><span class="line">Successfully built 63f07e977741</span><br><span class="line">Successfully tagged dockersamplevuejs_frontend:latest</span><br></pre></td></tr></table></figure><p>설치가 완료되었으면 image가 제대로 빌드되었는지 images 명령어를 이용하여 확인한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker images</span><br><span class="line">REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">dockersamplevuejs_frontend   latest              63f07e977741        2 minutes ago       811MB</span><br></pre></td></tr></table></figure><p>위와 같이 확인이 되었다면 이제 컨테이너로 실행을 시켜본다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose up</span><br><span class="line"></span><br><span class="line">Creating dockersamplevuejs_frontend_1 ...</span><br><span class="line">Creating dockersamplevuejs_frontend_1 ... <span class="keyword">done</span></span><br><span class="line">Attaching to dockersamplevuejs_frontend_1</span><br><span class="line">frontend_1  |</span><br><span class="line">frontend_1  | &gt; docker-sample-vuejs@1.0.0 server /usr/src/app</span><br><span class="line">frontend_1  | &gt; nodemon ./app.js</span><br><span class="line">frontend_1  |</span><br><span class="line">frontend_1  | [nodemon] 1.15.0</span><br><span class="line">frontend_1  | [nodemon] to restart at any time, enter `rs`</span><br><span class="line">frontend_1  | [nodemon] watching: *.*</span><br><span class="line">frontend_1  | [nodemon] starting `node ./app.js`</span><br></pre></td></tr></table></figure><p>위와 같이 컨테이너를 실행시켜주면 로컬에서 띄우던 화면과 동일한 화면이 뜨게 된다. 여기서 띄우는 화면은 docker의 IP로 접속해서 띄워야 한다. 혹시나 IP를 모르고 있다면 아래의 명령어를 이용해서 확인할 수 있다.<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-machine ip</span><br></pre></td></tr></table></figure><p></p><p>컨테이너에 해당하는 화면이 떴다면 일단 배포용 이미지는 완료가 되었다고 볼 수 있다.</p><h3 id="개발용-이미지-생성-및-Hot-reloading-Module과-연동하기"><a href="#개발용-이미지-생성-및-Hot-reloading-Module과-연동하기" class="headerlink" title="개발용 이미지 생성 및 Hot reloading Module과 연동하기"></a>개발용 이미지 생성 및 Hot reloading Module과 연동하기</h3><p>위에까지 해서 배포용 이미지까지는 빌드가 완료되었다. 이제는 개발용 이미지를 빌드하면 된다.</p><hr><h3 id="출처"><a href="#출처" class="headerlink" title="출처"></a>출처</h3><ul><li><a href="https://lockmedown.com/docker-tutorial-development-image/" target="_blank" rel="noopener">Docker for Devs Part 3: Hot Module Reloading and Live Editing in Containers</a></li></ul><div class="post-announce">현재 이커머스회사에서 frontend 개발자로 업무를 진행하고 있는 <a href="https://github.com/martinYounghoonKim">Martin</a> 입니다. 글을 읽으시고 궁금한 점은 댓글 혹은 메일(hoons0131@gmail.com)로 연락해주시면 빠른 회신 드리도록 하겠습니다. 이 외에도 네트워킹에 대해서는 언제나 환영입니다.：Martin（<a href="https://github.com/martinYounghoonKim">https://github.com/martinYounghoonKim</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/vuejs/2018/02/05/vue-lifecycle-hooks.html" title="Vue의 Lifecycle"><i class="iconfont icon-prev"></i>Vue의 Lifecycle</a></div><div class="post__prev post__prev--right"><a href="/webpack/2018/03/10/3-ways-to-set-up-webpack-with-hmr.html" title="Webpack의 HMR 설정하기">Webpack의 HMR 설정하기<i class="iconfont icon-next"></i></a></div></div></div></article><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6986373452203090" data-ad-slot="3762948283" data-ad-format="auto" data-full-width-responsive="true"></ins><script>window.onload=function(){(adsbygoogle=window.adsbygoogle||[]).push({})}</script><div id="disqus_thread"></div></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">Introduction</h3><p class="block__text">E-Commerce에서 Front-end 개발을 하고 있는 마틴입니다. 안정성 있는 서비스 구축과 TDD 프로그래밍에 관심이 많으며, 긍정적인 네트워킹에 대해서도 언제나 환영입니다. 저와의 네트워킹을 원하시는 분은 언제든 편하게 SNS나 게시글의 댓글 혹은 이메일을 통해 연락주시면 최대한 빨리 회신드리도록 하겠습니다:)</p></div><div class="sidebar__block"><h3 class="block__title">Categories</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/theory/">theory</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/webpack/">Webpack</a><span class="block-list-count">6</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/vuejs/">VueJS</a><span class="block-list-count">9</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/unit-test/">Unit Test</a><span class="block-list-count">3</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/typescript/">Typescript</a><span class="block-list-count">6</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/theory/">Theory</a><span class="block-list-count">12</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/review/">Review</a><span class="block-list-count">12</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/reactjs/">ReactJS</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/react/">React</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/nodejs/">NodeJS</a><span class="block-list-count">3</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/mysql/">Mysql</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/kotlin/">Kotlin</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/javascript/">Javascript</a><span class="block-list-count">15</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/devops/">Devops</a><span class="block-list-count">10</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/ai/">AI</a><span class="block-list-count">3</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">Latest Post</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/review/2020/01/07/remembrance-in-2019.html" title="2019년의 회고"><div class="item__cover"><img src="/images/review/retro01.jpg" alt="2019년의 회고"></div><div class="item__info"><h3 class="item__title">2019년의 회고</h3><span class="item__text">2020-01-07</span></div></a></li><li class="latest-post-item"><a href="/theory/2019/12/15/ipv4-address.html" title="IPv4 주소 체계"><div class="item__cover"><img src="/images/theory/ipv4-address00.png" alt="IPv4 주소 체계"></div><div class="item__info"><h3 class="item__title">IPv4 주소 체계</h3><span class="item__text">2019-12-15</span></div></a></li><li class="latest-post-item"><a href="/kotlin/2019/11/24/nothing-type-in-kotlin.html" title="Kotlin의 Nothing 타입"><div class="item__cover"><img src="/images/kotlin/kotlin.png" alt="Kotlin의 Nothing 타입"></div><div class="item__info"><h3 class="item__title">Kotlin의 Nothing 타입</h3><span class="item__text">2019-11-24</span></div></a></li><li class="latest-post-item"><a href="/react/2019/11/10/react-hooks.html" title="React Hooks 톺아보기"><div class="item__cover"><img src="/images/react/react-hooks00.png" alt="React Hooks 톺아보기"></div><div class="item__info"><h3 class="item__title">React Hooks 톺아보기</h3><span class="item__text">2019-11-10</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">Tags</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/2018회고/">2018회고</a></li><li class="tag-item"><a class="tag-link" href="/tags/2019회고-coupang-쿠팡/">2019회고, Coupang, 쿠팡</a></li><li class="tag-item"><a class="tag-link" href="/tags/ai/">AI</a></li><li class="tag-item"><a class="tag-link" href="/tags/aws/">AWS</a></li><li class="tag-item"><a class="tag-link" href="/tags/aws-s3/">AWS S3</a></li><li class="tag-item"><a class="tag-link" href="/tags/array/">Array</a></li><li class="tag-item"><a class="tag-link" href="/tags/authenticate/">Authenticate</a></li><li class="tag-item"><a class="tag-link" href="/tags/awwwards-2018/">Awwwards 2018</a></li><li class="tag-item"><a class="tag-link" href="/tags/back-end/">Back-end</a></li><li class="tag-item"><a class="tag-link" href="/tags/backend/">Backend</a></li><li class="tag-item"><a class="tag-link" href="/tags/binary-search/">Binary Search</a></li><li class="tag-item"><a class="tag-link" href="/tags/csr/">CSR</a></li><li class="tag-item"><a class="tag-link" href="/tags/chai/">Chai</a></li><li class="tag-item"><a class="tag-link" href="/tags/chrome-extension/">Chrome extension</a></li><li class="tag-item"><a class="tag-link" href="/tags/clean-code/">Clean code</a></li><li class="tag-item"><a class="tag-link" href="/tags/commonjs/">CommonJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/conference/">Conference</a></li><li class="tag-item"><a class="tag-link" href="/tags/cookie/">Cookie</a></li><li class="tag-item"><a class="tag-link" href="/tags/database/">Database</a></li><li class="tag-item"><a class="tag-link" href="/tags/dev-ops/">Dev-ops</a></li><li class="tag-item"><a class="tag-link" href="/tags/devops/">Devops</a></li><li class="tag-item"><a class="tag-link" href="/tags/docker/">Docker</a></li><li class="tag-item"><a class="tag-link" href="/tags/ecma-script/">ECMA script</a></li><li class="tag-item"><a class="tag-link" href="/tags/eslint/">Eslint</a></li><li class="tag-item"><a class="tag-link" href="/tags/express/">Express</a></li><li class="tag-item"><a class="tag-link" href="/tags/first-class-object/">First Class Object</a></li><li class="tag-item"><a class="tag-link" href="/tags/flux/">Flux</a></li><li class="tag-item"><a class="tag-link" href="/tags/google-cloud-platform/">Google Cloud Platform</a></li><li class="tag-item"><a class="tag-link" href="/tags/hash-table/">Hash table</a></li><li class="tag-item"><a class="tag-link" href="/tags/ipv4-network-ip/">IPv4, Network, IP</a></li><li class="tag-item"><a class="tag-link" href="/tags/immutablejs/">ImmutableJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/jwt/">JWT</a></li><li class="tag-item"><a class="tag-link" href="/tags/jwt-token/">JWT Token</a></li><li class="tag-item"><a class="tag-link" href="/tags/javascript/">Javascript</a></li><li class="tag-item"><a class="tag-link" href="/tags/javascript-framework/">Javascript Framework</a></li><li class="tag-item"><a class="tag-link" href="/tags/javascript-method/">Javascript Method</a></li><li class="tag-item"><a class="tag-link" href="/tags/javascript-디자인-패턴/">Javascript 디자인 패턴</a></li><li class="tag-item"><a class="tag-link" href="/tags/karma/">Karma</a></li><li class="tag-item"><a class="tag-link" href="/tags/linear-regression/">Linear Regression</a></li><li class="tag-item"><a class="tag-link" href="/tags/list/">List</a></li><li class="tag-item"><a class="tag-link" href="/tags/machine-learning/">Machine learning</a></li><li class="tag-item"><a class="tag-link" href="/tags/mocha/">Mocha</a></li><li class="tag-item"><a class="tag-link" href="/tags/moment/">Moment</a></li><li class="tag-item"><a class="tag-link" href="/tags/momentjs/">MomentJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/mongodb/">MongoDB</a></li><li class="tag-item"><a class="tag-link" href="/tags/mysql/">Mysql</a></li><li class="tag-item"><a class="tag-link" href="/tags/naver-tech-concert/">Naver Tech Concert</a></li><li class="tag-item"><a class="tag-link" href="/tags/nodejs/">NodeJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/nodejs/">Nodejs</a></li><li class="tag-item"><a class="tag-link" href="/tags/nothing타입-코틀린-kotlin/">Nothing타입, 코틀린, Kotlin</a></li><li class="tag-item"><a class="tag-link" href="/tags/oop-programming/">OOP Programming</a></li><li class="tag-item"><a class="tag-link" href="/tags/prototype/">Prototype</a></li><li class="tag-item"><a class="tag-link" href="/tags/queue/">Queue</a></li><li class="tag-item"><a class="tag-link" href="/tags/react-react-hooks/">React, React Hooks</a></li><li class="tag-item"><a class="tag-link" href="/tags/reactjs/">ReactJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/reactjs-lifecycle/">ReactJS lifecycle</a></li><li class="tag-item"><a class="tag-link" href="/tags/reflow-and-repaint/">Reflow and Repaint</a></li><li class="tag-item"><a class="tag-link" href="/tags/requirejs/">RequireJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/restful-api/">Restful API</a></li><li class="tag-item"><a class="tag-link" href="/tags/review/">Review</a></li><li class="tag-item"><a class="tag-link" href="/tags/solid-원칙/">SOLID 원칙</a></li><li class="tag-item"><a class="tag-link" href="/tags/ssr/">SSR</a></li><li class="tag-item"><a class="tag-link" href="/tags/san-francisco/">San francisco</a></li><li class="tag-item"><a class="tag-link" href="/tags/sentry/">Sentry</a></li><li class="tag-item"><a class="tag-link" href="/tags/session/">Session</a></li><li class="tag-item"><a class="tag-link" href="/tags/stack/">Stack</a></li><li class="tag-item"><a class="tag-link" href="/tags/tmon/">TMON</a></li><li class="tag-item"><a class="tag-link" href="/tags/tensorflow/">TensorFlow</a></li><li class="tag-item"><a class="tag-link" href="/tags/tree/">Tree</a></li><li class="tag-item"><a class="tag-link" href="/tags/tree-node/">Tree Node</a></li><li class="tag-item"><a class="tag-link" href="/tags/typescript/">Typescript</a></li><li class="tag-item"><a class="tag-link" href="/tags/umd/">UMD</a></li><li class="tag-item"><a class="tag-link" href="/tags/unit-test/">Unit test</a></li><li class="tag-item"><a class="tag-link" href="/tags/util-type/">Util type</a></li><li class="tag-item"><a class="tag-link" href="/tags/vitual-dom/">Vitual Dom</a></li><li class="tag-item"><a class="tag-link" href="/tags/vuejs/">VueJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/vuejs/">Vuejs</a></li><li class="tag-item"><a class="tag-link" href="/tags/vuex/">Vuex</a></li><li class="tag-item"><a class="tag-link" href="/tags/webpack/">Webpack</a></li><li class="tag-item"><a class="tag-link" href="/tags/webpack-hmr/">Webpack HMR</a></li><li class="tag-item"><a class="tag-link" href="/tags/withinnovation/">Withinnovation</a></li><li class="tag-item"><a class="tag-link" href="/tags/d-ts/">d.ts</a></li><li class="tag-item"><a class="tag-link" href="/tags/interface/">interface</a></li><li class="tag-item"><a class="tag-link" href="/tags/네이버콘서트/">네이버콘서트</a></li><li class="tag-item"><a class="tag-link" href="/tags/멋쟁이-사자처럼/">멋쟁이 사자처럼</a></li><li class="tag-item"><a class="tag-link" href="/tags/소프트스킬/">소프트스킬</a></li><li class="tag-item"><a class="tag-link" href="/tags/스타트업/">스타트업</a></li><li class="tag-item"><a class="tag-link" href="/tags/스택오버플로우/">스택오버플로우</a></li><li class="tag-item"><a class="tag-link" href="/tags/애자일/">애자일</a></li><li class="tag-item"><a class="tag-link" href="/tags/여기어때/">여기어때</a></li><li class="tag-item"><a class="tag-link" href="/tags/유틸-타입/">유틸 타입</a></li><li class="tag-item"><a class="tag-link" href="/tags/인생전략71가지/">인생전략71가지</a></li><li class="tag-item"><a class="tag-link" href="/tags/인피니티-스크롤/">인피니티 스크롤</a></li><li class="tag-item"><a class="tag-link" href="/tags/제네릭타입/">제네릭타입</a></li><li class="tag-item"><a class="tag-link" href="/tags/최고의집합/">최고의집합</a></li><li class="tag-item"><a class="tag-link" href="/tags/커피한잔마시며-끝내는-vuejs/">커피한잔마시며 끝내는 VueJS</a></li><li class="tag-item"><a class="tag-link" href="/tags/콜스택/">콜스택</a></li><li class="tag-item"><a class="tag-link" href="/tags/타입스크립트/">타입스크립트</a></li><li class="tag-item"><a class="tag-link" href="/tags/티모니언/">티모니언</a></li><li class="tag-item"><a class="tag-link" href="/tags/티켓몬스터/">티켓몬스터</a></li><li class="tag-item"><a class="tag-link" href="/tags/프로그래머스/">프로그래머스</a></li><li class="tag-item"><a class="tag-link" href="/tags/하노이탑알고리즘/">하노이탑알고리즘</a></li><li class="tag-item"><a class="tag-link" href="/tags/해커톤/">해커톤</a></li><li class="tag-item"><a class="tag-link" href="/tags/호텔타임/">호텔타임</a></li><li class="tag-item"><a class="tag-link" href="/tags/회고/">회고</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">About</h3><div class="item__content"><p class="item__text">Martin(Younghoon Kim)</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>Seoul, South Korea</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>hoons0131@gmail.com</span></li></ul></div></div><div class="footer-top__item footer__image"><img src="/images/bg/avatar.png" alt="logo" title="프론트엔드 개발자 Martin의 사적인 블로그"></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>.</p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/martinyounghoonkim" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="mailto:hoons0131@gmail.com" target="_blank" title="email"><i class="iconfont icon-email"></i></a></li><li class="social-network__item"><a href="/atom.xml" target="_blank" title="rss"><i class="iconfont icon-rss"></i></a></li><li class="social-network__item"><a href="https://www.linkedin.com/in/younghoon-kim-2a1530149/" target="_blank" title="linkedin"><i class="iconfont icon-in"></i></a></li><li class="social-network__item"><a href="https://www.facebook.com/profile.php?id=100005693104994" target="_blank" title="facebook"><i class="iconfont icon-facebook"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><script>var disqus_shortname="blog-martinwork-co-kr",disqus_config=function(){this.page.url="http://blog.martinwork.co.kr/devops/2018/02/16/setting-docker-volume-with-webpack.html",this.page.identifier="/devops/2018/02/16/setting-docker-volume-with-webpack.html",this.page.title="Hot Module Reloading Module in Docker"};!function(){var t=document,e=t.createElement("script");e.src="https://"+disqus_shortname+".disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>